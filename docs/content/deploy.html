<h1>Hướng Dẫn Triển Khai (Deploy) TeleDrive</h1>
<p>Phần này sẽ hướng dẫn bạn các bước chi tiết để cài đặt và triển khai TeleDrive lên máy chủ của bạn. Chúng ta sẽ sử dụng Docker Compose để đơn giản hóa quá trình.</p>

<!-- KHỐI MỚI THÊM CHO ANH ĐÂY -->
<div class="tech-stack">
    <h2>Công Nghệ Sử Dụng</h2>
    <p>Quá trình triển khai này yêu cầu bạn làm quen với các công nghệ sau:</p>
    <div class="tech-icons">
        <div class="tech-icon">
            <i class="fab fa-docker"></i>
            <span>Docker</span>
        </div>
        <div class="tech-icon">
            <i class="fab fa-telegram"></i>
            <span>Telegram</span>
        </div>
        <div class="tech-icon">
            <i class="fab fa-git-alt"></i>
            <span>Git</span>
        </div>
        <div class="tech-icon">
            <i class="fab fa-linux"></i>
            <span>Linux Server</span>
        </div>
    </div>
</div>
<!-- KẾT THÚC KHỐI MỚI -->

<h1>Hướng Dẫn Triển Khai (Deploy) TeleDrive "Tự Chế"</h1>
<p>Chào mừng đến với hướng dẫn "dựng" một server TeleDrive mini của riêng bạn. Chúng ta sẽ không dùng các project cũ kỹ (đã bị lỗi) trên mạng. Thay vào đó, chúng ta sẽ tự xây dựng một "bộ não" (Backend) mạnh mẽ bằng <strong>FastAPI (Python)</strong> và <strong>Pyrogram</strong>, sau đó kết nối nó với giao diện web (Frontend) "GPT quá" của bạn!</p>
<p>Hãy làm theo 5 bước chính dưới đây.</p>

<hr>

<h2>1. Cài Đặt Môi Trường Docker</h2>
<p>Trước tiên, chúng ta cần "sân khấu" để chạy "bộ não". Đó chính là Docker.</p>

<h3>1.1. Tải Docker Desktop</h3>
<p>Truy cập trang chủ của Docker để tải xuống phiên bản phù hợp với hệ điều hành của bạn (Windows, Mac, hay Linux).</p>
<img src="./images/a2.png" alt="Ảnh minh họa tải Docker" style="max-width: 80%; display: block; margin: 20px auto;">

<h3>1.2. Cài đặt và Đăng nhập</h3>
<p>Quá trình cài đặt rất đơn giản. Sau khi cài xong, máy tính có thể sẽ khởi động lại. Anh cần mở Docker Desktop lên và đăng nhập (hoặc tạo tài khoản mới) để kích hoạt.</p>
<img src="./images/a3.png" alt="Ảnh minh họa cài đặt Docker" style="max-width: 80%; display: block; margin: 20px auto;">

<h3>1.3. Cập nhật WSL (Quan trọng với Windows)</h3>
<p>Docker trên Windows cần <strong>WSL (Windows Subsystem for Linux)</strong> để chạy các container Linux (như cái chúng ta sắp dùng). Nếu Docker báo "WSL needs updating", anh chỉ cần mở CMD và gõ lệnh <code>wsl --update</code> là xong.</p>
<img src="./images/a4.png" alt="Ảnh minh họa cập nhật WSL" style="max-width: 80%; display: block; margin: 20px auto;">

<hr>

<h2>2. Lấy "Chìa Khóa" (Keys) Từ Telegram</h2>
<p>"Bộ não" của chúng ta cần "giấy tờ tùy thân" để được phép nói chuyện với Telegram.</p>

<h3>2.1. Lấy API ID và API Hash (Giấy tờ User)</h3>
<p>Truy cập <a href="https://my.telegram.org/apps" target="_blank">my.telegram.org</a>. Đăng nhập bằng SĐT của anh (nhận code qua app Telegram). Anh sẽ cần tạo một "Application" mới. Đừng lo, cứ điền thông tin cơ bản là được.</p>
<img src="./images/a5.png" alt="Ảnh minh họa đăng nhập My Telegram" style="max-width: 80%; display: block; margin: 20px auto;">
<p>Sau khi tạo app thành công, trang web sẽ cung cấp cho anh 2 giá trị quan trọng: <strong>App api_id</strong> và <strong>App api_hash</strong>. Copy 2 dòng này lại.</p>
<img src="./images/a6.png" alt="Ảnh minh họa lấy API Key" style="max-width: 80%; display: block; margin: 20px auto;">

<h3>2.2. Lấy Bot Token (Giấy tờ Bot)</h3>
<p>Mở Telegram, tìm <strong>@BotFather</strong>. Gõ lệnh <code>/newbot</code>, đặt tên và username cho bot. BotFather sẽ trả về một mã <strong>Token</strong> (dạng <code>829...:AAG...</code>). Đây là "chìa khóa" quan trọng nhất.</p>
<img src="./images/a7.png" alt="Ảnh minh họa lấy Bot Token" style="max-width: 80%; display: block; margin: 20px auto;">

<h3>2.3. Lấy Chat ID (Địa chỉ "Kho Chứa")</h3>
<p>Chúng ta cần một "kho" để bot ném file vào. Anh tạo một <strong>Channel Mới (Private)</strong> (ví dụ: "Huy Teldrive Storage"). Sau đó, anh phải "mời" con bot của mình vào Channel đó (Add Subscriber) và "thăng chức" (Promote) nó lên làm <strong>Admin</strong>.</p>
<p>Để lấy ID của "kho", anh gõ <code>/get_id</code> vào channel đó (lệnh này sẽ được "bộ não" <code>app.py</code> xử lý) và bot sẽ trả lời lại <strong>Chat ID</strong> (một số âm, ví dụ: <code>-100...</code>).</p>
<img src="./images/a8.png" alt="Ảnh minh họa lấy Chat ID" style="max-width: 80%; display: block; margin: 20px auto;">

<hr>

<h2>3. Cấu Hình Backend (Bộ Não)</h2>
<p>Đây là lúc chúng ta xây dựng "bộ não" (FastAPI + Pyrogram) mà anh em mình đã fix lỗi cả buổi tối!</p>

<h3>3.1. Tạo file <code>.env</code></h3>
<p>Tạo file <code>.env</code> trong thư mục dự án. File này chứa tất cả "chìa khóa" mà anh vừa lấy. "Bộ não" sẽ đọc file này để biết nó là ai và phải gửi file đi đâu.</p>
<img src="./images/a8.png" alt="Ảnh minh họa file .env" style="max-width: 80%; display: block; margin: 20px auto;">

<h3>3.2. Tạo file <code>docker-compose.yml</code> và <code>app.py</code></h3>
<p><strong>docker-compose.yml:</strong> Đây là "bản thiết kế" cho Docker, bảo nó phải "dựng" cái container <code>filestream_bot_huy</code> lên, đọc file <code>.env</code>, mở cổng 8080, và chạy lệnh trong <code>Dockerfile</code>.</p>
<p><strong>app.py (Lõi logic):</strong> Đây là "bộ não" thật sự! File này làm 2 việc: (1) Chạy con bot Pyrogram để "tay chân" kết nối với Telegram, và (2) Chạy server FastAPI để "giao tiếp" (mở API) cho cái web của anh gọi vào.</p>
<img src="./images/a9.png" alt="Ảnh minh họa docker-compose và app.py" style="max-width: 80%; display: block; margin: 20px auto;">

<hr>

<h2>4. Cấu Hình Frontend (Gương Mặt)</h2>
<p>Đây là giao diện "GPT quá" của anh. Chúng ta sẽ "thổi hồn" cho nó bằng cách kết nối nó với "bộ não".</p>

<h3>4.1. Tạo Giao diện Web (<code>script.js</code>)</h3>
<p>Trong file <code>script.js</code>, anh định nghĩa <code>TELEDRIVE_API = 'http://127.0.0.1:8080'</code> để trỏ về "bộ não".</p>
<p>Quan trọng nhất là hàm <code>handleUpload</code>. Hàm này lấy file từ form HTML, đóng gói vào <code>FormData</code>, và thực hiện <code>fetch</code> (gửi POST) đến <code>/api/upload</code> mà "bộ não" <code>app.py</code> đang lắng nghe.</p>
<img src="./images/a10.png" alt="Ảnh minh họa code script.js" style="max-width: 80%; display: block; margin: 20px auto;">

<hr>

<h2>5. Chạy Thành Công Demo</h2>
<p>Sau khi đã chuẩn bị đủ các file (.env, docker-compose.yml, Dockerfile, app.py, requirements.txt, index.html, script.js...), anh chạy 2 lệnh sau ở 2 cửa sổ CMD khác nhau:</p>
<ol>
    <li><code>docker-compose up -d --build</code> (Để dựng "Bộ não" Backend ở cổng 8080)</li>
    <li><code>python -m http.server 8000</code> (Để dựng "Gương mặt" Frontend ở cổng 8000)</li>
</ol>
<p>Kết quả cuối cùng! Anh truy cập <code>http://localhost:8000</code>, vào mục "Tải File Lên (API)", chọn file và upload. File sẽ xuất hiện trong "kho chứa" (Channel Telegram) của anh!</p>
<img src="./images/a11.png" alt="Ảnh minh họa chạy thành công" style="max-width: 80%; display: block; margin: 20px auto;">

<p>Chúc mừng anh đã hoàn thành một hệ thống Full-stack thực thụ!</p>