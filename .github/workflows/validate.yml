name: Validate

# Chạy tự động khi có PR (Pull Request) nhắm tới các nhánh chính
on:
  merge_group:
  pull_request:
    branches:
      - main
      - master

jobs:
  validate-landscape:
    runs-on: ubuntu-latest
    name: "Kiểm tra tính hợp lệ của landscape.yml"
    steps:
      # Bước 1: Checkout code
      - name: Tải mã nguồn
        uses: actions/checkout@v3
        
      # Bước 2: Dùng action của CNCF để kiểm tra cú pháp và cấu trúc file YAML
      - name: Chạy kiểm tra Landscape
        uses: cncf/landscape2-validate-action@v2
        with:
          # Chỉ định loại tệp đang được kiểm tra là dữ liệu (data)
          target_kind: data 
          # Chỉ định đường dẫn tới file dữ liệu
          target_path: ./landscape.yml